<div *ngIf="group; else loading" class="container-max-width group-container p-3">
  <mat-card class="group-card">
    <mat-card-header class="d-flex container-center p-3 group-header">
      <div class="container-center">
        <img [src]="group.image" class="group-image">
      </div>
      <section aria-label="Artist main information">
        <div class="d-flex justify-content-between align-items-center">
          <article>
            <mat-card-title>{{ group.name }}</mat-card-title>
            <!-- <app-text-with-icon icon="person" [text]="member.role"></app-text-with-icon> -->
          </article>
          <div>
            <button mat-icon-button [matTooltip]="groupMember ? 'Należysz' : 'Dołącz'" (click)="!groupMember && joinGroup(group.id)">
              <mat-icon class="join-icon">{{groupMember ? 'person_check' : 'person_add'}}</mat-icon>
            </button>
          </div>
        </div>
        <article class="mt-2" aria-label="Artist description">
          <p>{{ group.description || "Lorem ipsum dolor sit amet consectetur, adipisicing elit. Minus quos doloremque soluta pariatur sunt optio modi accusamus beatae laborum voluptatibus totam dignissimos, architecto nam voluptate fuga consequuntur ipsam perspiciatis? In quisquam tenetur, ratione quam adipisci assumenda? Sequi dignissimos amet deserunt totam repellendus temporibus eveniet libero, quidem cumque, repudiandae cum aut." }}</p>
        </article>
      </section>
    </mat-card-header>
    <mat-card-content>
      <mat-divider class="mt-2" style="background-color: lightgray;"></mat-divider>

      <mat-card-title class="my-3">
        <app-text-with-icon icon="query_stats" text="Statystyki"></app-text-with-icon>
      </mat-card-title>
      <section class="d-flex flex-column" style="gap: 1rem;">
        <span>Liczba postów: {{ group.discussionPosts.length || 0 }}</span>

        <article class="d-flex" style="gap: 0.5rem;" aria-label="Group events">
          <span>Wydarzenia ({{ group.events.length }}):</span>
          <a *ngFor="let event of group.events" routerLink="../event" [queryParams]="{ id: event.id }">{{ event.name }}</a>
        </article>

        <article class="d-flex" style="gap: 0.5rem;" aria-label="Group members">
          <span>Czonkowie ({{ group.members.length }}):</span>
          <a *ngFor="let group of group.members" routerLink="../user" [queryParams]="{ id: group.id }">{{ group.name }}</a>
        </article>
      </section>
    </mat-card-content>
  </mat-card>
</div>

<ng-template #loading>
  <div class="d-flex justify-content-center mt-5">
    <mat-spinner [diameter]="50"></mat-spinner>
  </div>
</ng-template>
